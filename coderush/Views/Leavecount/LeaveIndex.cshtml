@using coderush.Models
@using Microsoft.AspNetCore.Identity

@model List<LeaveCountViewModel>

@inject UserManager<ApplicationUser> _userManager
@{ ViewData["Title"] = "Leave";
    var user = await _userManager.GetUserAsync(User);
    var roles = await _userManager.GetRolesAsync(user);
}

<!-- Content Wrapper. Contains page content -->
<div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
        <h1>
            @ViewData["Title"]
        </h1>
        <p>
            @await Html.PartialAsync(PartialView.StatusMessage, TempData[StaticString.StatusMessage])
        </p>

    </section>
    <!-- Main content -->
    <section class="content">
        @Html.AntiForgeryToken()
        <!-- Default box -->
        <div class="box">
            <div class="box-header with-border">
                <h3 class="box-title">List of Leave item</h3>
                <div class="box-tools pull-right">
                    <a href="javascript:void(0)" id="btninsert" class="btn btn-primary"><i class="fa fa-plus"></i></a>
                </div>
            </div>

            <div class="box-body">
                @if (roles.Contains("SuperAdmin") || roles.Contains("HR"))
                {
                    <div class="form-group">
                        <select name="Userid" id="leavedrpdwn" class="form-control" asp-items="@ViewBag.UserList"></select>
                        @*<select class="dropdown-mega-menu-xl" id="leavedrpdwn"></select>*@
                    </div>
                }
                else
                {
                    <div class="form-group">
                        <select name="Userid" id="leavedrpdwn" style="display:none" class="form-control" asp-items="@ViewBag.UserList"></select>
                        @*<select class="dropdown-mega-menu-xl" id="leavedrpdwn"></select>*@
                    </div>
                }


                <div class="table-responsive">
                    <table id="grid" class="table table-striped" cellspacing="0" width="120%">
                        <thead>
                            <tr>
                                 
                                    <th width="5%">Edit</th>
                                    <th width="20%">Userid</th>
                                    <th width="10%">Fromdate</th>
                                    <th width="10%">Todate</th>
                                    <th width="10%">Count</th>
                                    <th width="10%">EmployeeDescription</th>
                                    @if (roles.Contains("SuperAdmin") || roles.Contains("HR"))
                                    {
                                        <th width="10%">HrDescription</th>
                                    }

                                    <th width="10%">Is approve</th>
                                    <th width="10%">Approve Date</th>

                                    <th width="10%">FileUpload</th>
                                    @if (roles.Contains("SuperAdmin") || roles.Contains("HR"))
                                    {
                                        <th width="10%">approve</th>
                                    }

                                </tr>
                        </thead>

                        <tbody id="levtblbdy">
                        </tbody>
                    </table>
                </div>

            </div>
            <!-- /.box-body -->
        </div>

        <!-- /.box -->
    </section>
    <!-- /.content -->
</div>
<!-- /.content-wrapper -->

<div class="container">

    <!-- Modal -->
    <div class="modal fade" id="myModal" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Approv Details</h4>
                </div>
                <div class="modal-body">
                    <div class="table-responsive">
                        <form asp-action="Create">
                            <input name="IsValid" type="hidden" id="leaveId" />
                            <div class="form-group">
                                <label>HrDescription :</label>
                                <textarea type="text" TextMode="MultiLine" rows="1" cols="10" class="form-control" id="notes" style="width: 572px;height: 165px;"></textarea>
                            </div>
                            <div class="form-group " id="checkIsAppprove">
                                <div class="form-group col-md-3">
                                    <div class="form-group">
                                        <label>Is Approv</label>
                                        @*<input type="checkbox" id="IsApprove" class="Approvcheck" />*@

                                        <input name="selector[]" id="IsApprove" class="Approvcheck" type="checkbox" value="1" />

                                    </div>
                                    <div class="form-group">
                                        <label>Is Reject</label>
                                        @*<input type="checkbox" id="IsReject" class="Approvcheck" />*@
                                        <input name="selector[]" id="IsReject" class="Approvcheck" type="checkbox" value="0" />
                                    </div>
                                </div>
                            </div>
                        </form>
                        <div class="modal-footer">
                            @*<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>*@
                            <button type="button" class="btn btn-success" id="saveLeave" data-dismiss="modal">Save</button>
                        </div>

                    </div>

                </div>


            </div>

        </div>
    </div>

</div>

@section Styles{
    <!-- DataTables -->
    <link rel="stylesheet" href="~/adminlte/components/datatables.net-bs/css/dataTables.bootstrap.min.css">
}


@section Scripts{


    <!-- DataTables -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js" integrity="sha512-qTXRIMyZIFb8iQcfjXWCO8+M5Tbc38Qi5WzdPOYZHIlZpzBHG3L3by84BBBOiRGiEb7KKtAOAs5qYdUiZiQNNQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="~/adminlte/components/datatables.net/js/jquery.dataTables.min.js"></script>
    <script src="~/adminlte/components/datatables.net-bs/js/dataTables.bootstrap.min.js"></script>
    @*<script src="~/js/jquery.min.js"></script>
        <script src="~/js/jquery-ui.js"></script>*@

    <script src="~/js/LeaveCount.js"></script>

    <!-- page script -->
    <script type="text/javascript">
        $(document).ready(function () {

            $('#grid').DataTable({
                lengthChange: false,
                info: false,
                searching: true,
                dom: 'lrtip',
                scrollX: false,
                pageLength: 25,
            });

        });


    </script>

}
